{% extends "base.html" %}
{% load static %}

{% block title %}STAR Master{% endblock %}

{% block content %}

<!-- Particle Canvas Background -->
<canvas id="particle-canvas" aria-hidden="true" class="fixed top-0 left-0 w-full h-full z-0 pointer-events-none"></canvas>

<!-- Hero Section -->
<div id="hero-section" class="hero min-h-[70vh] bg-gradient-to-bl from-white via-secondary to-primary rounded-3xl mb-12 relative z-10 content-visible">
  <div class="hero-content flex-col lg:flex-row-reverse text-primary-content lg:px-14">
    <img
      src="{% static 'images/star_master_hero.webp' %}"
      alt="STAR Master"
      class="max-w-sm rounded-lg shadow-2xl"
    />
    <div>
      <h1 class="text-5xl md:text-7xl font-bold mb-6">STAR Master</h1>
      <p class="text-xl md:text-2xl opacity-90 mb-8 leading-relaxed">
        Master your interview skills with the STAR method. Create, practice, and perfect your responses to common 
        interview questions using the proven Situation, Task, Action, Result framework.
      </p>

      {% if not user.is_authenticated %}
      <div class="flex flex-col sm:flex-row gap-4">
        <a href="{% url 'account_signup' %}" class="btn btn-secondary btn-lg">
          <i class="fas fa-user-plus mr-2"></i>
          Start Practicing
        </a>
        <a href="{% url 'account_login' %}" class="btn btn-outline btn-secondary btn-lg">
          <i class="fas fa-sign-in-alt mr-2"></i>
          Sign In
        </a>
      </div>
      {% else %}
      <div class="flex flex-col sm:flex-row gap-4">
        <a href="{% url 'questions:list' %}" class="btn btn-secondary btn-lg">
          <i class="fas fa-question-circle mr-2"></i>
          Browse Questions
        </a>
        <a href="{% url 'profile' %}" class="btn btn-outline btn-secondary btn-lg">
          <i class="fas fa-user mr-2"></i>
          My Profile
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- Features Section -->
<div id="features-section" class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12 relative z-10 content-visible">
  <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300">
    <div class="card-body text-center">
      <div class="avatar avatar-placeholder mb-4 mx-auto">
        <div class="bg-primary text-primary-content w-16 rounded-full">
          <span class="text-2xl"><i class="fas fa-question-circle"></i></span>
        </div>
      </div>
      <h3 class="card-title justify-center text-xl mb-3">Practice Questions</h3>
      <p class="text-base-content/70">Browse through our curated collection of common interview questions across various industries and roles.</p>
    </div>
  </div>

  <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300">
    <div class="card-body text-center">
      <div class="avatar avatar-placeholder mb-4 mx-auto">
        <div class="bg-secondary text-secondary-content w-16 rounded-full">
          <span class="text-2xl"><i class="fas fa-star"></i></span>
        </div>
      </div>
      <h3 class="card-title justify-center text-xl mb-3">STAR Method</h3>
      <p class="text-base-content/70">
        Structure your responses using the proven STAR framework: Situation, Task, Action, Result.
      </p>
    </div>
  </div>

  <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300">
    <div class="card-body text-center">
      <div class="avatar avatar-placeholder mb-4 mx-auto">
        <div class="bg-accent text-accent-content w-16 rounded-full">
          <span class="text-2xl"><i class="fas fa-history"></i></span>
        </div>
      </div>
      <h3 class="card-title justify-center text-xl mb-3">Track Progress</h3>
      <p class="text-base-content/70">Keep track of your answers and continuously improve your interview responses over time.</p>
    </div>
  </div>
</div>

{% if user.is_authenticated %}
<!-- Quick Actions Section -->
<div id="quick-actions-section" class="mb-12 relative z-10 content-visible">
  <h2 class="text-3xl font-bold text-center mb-8 text-base-content">Quick Actions</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
    <!-- Create Answer -->
    <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300 h-full">
      <div class="card-body flex flex-col h-full">
        <div class="flex items-center mb-4">
          <div class="avatar avatar-placeholder mr-4">
            <div class="bg-success text-success-content w-12 rounded-lg">
              <span class="text-xl"><i class="fas fa-plus-circle"></i></span>
            </div>
          </div>
          <div class="flex-1">
            <h4 class="card-title text-lg">Create Answer</h4>
            <p class="text-base-content/70 text-sm">Craft a new STAR response to practice questions</p>
          </div>
        </div>
        <div class="card-actions justify-end mt-auto">
          <a href="{% url 'questions:list' %}" class="btn btn-primary btn-sm">Start Answering</a>
        </div>
      </div>
    </div>

    <!-- My Answers -->
    <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300 h-full">
      <div class="card-body flex flex-col h-full">
        <div class="flex items-center mb-4">
          <div class="avatar avatar-placeholder mr-4">
            <div class="bg-warning text-warning-content w-12 rounded-lg">
              <span class="text-xl"><i class="fas fa-clipboard-list"></i></span>
            </div>
          </div>
          <div class="flex-1">
            <h4 class="card-title text-lg">My Answers</h4>
            <p class="text-base-content/70 text-sm">Review and refine your practice responses</p>
          </div>
        </div>
        <div class="card-actions justify-end mt-auto">
          <a href="{% url 'profile' %}" class="btn btn-secondary btn-sm">View Answers</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}

<!-- Call to Action -->
<div id="cta-section" class="hero bg-base-200 rounded-3xl relative z-10 content-visible">
  <div class="hero-content text-center py-12">
    <div class="max-w-2xl">
      <h2 class="text-3xl font-bold mb-4 text-base-content">Ready to Ace Your Next Interview?</h2>
      <p class="text-base-content/70 mb-8 text-lg leading-relaxed">
        Join professionals who are mastering their interview skills with structured STAR method responses. 
        Practice makes perfect!
      </p>
      {% if not user.is_authenticated %}
      <a href="{% url 'account_signup' %}" class="btn btn-primary btn-lg">
        <i class="fas fa-rocket mr-2"></i>
        Start Practicing
      </a>
      {% else %}
      <a href="{% url 'questions:list' %}" class="btn btn-primary btn-lg">
        <i class="fas fa-question-circle mr-2"></i>
        Explore Questions
      </a>
      {% endif %}
    </div>
  </div>
</div>

<!-- Stargazing Mode Controls -->
<div class="fixed bottom-6 right-6 z-30">
  <!-- Watch the stars button (visible by default) -->
  <button id="stargazing-btn" class="btn btn-primary btn-circle btn-lg shadow-lg hover:shadow-xl transition-all duration-300 content-visible">
    <i class="fas fa-star text-xl"></i>
  </button>
  
  <!-- Exit stargazing button (hidden by default) -->
  <button id="exit-stargazing-btn" class="btn btn-neutral btn-md shadow-lg hover:shadow-xl transition-all duration-300 opacity-0 pointer-events-none absolute bottom-6 right-0">
    <i class="fas fa-times mr-1"></i>
    Exit
  </button>
</div>

<!-- Particle Effect Script -->
<script src="{% static 'js/particle-effect.js' %}"></script>

<!-- Stargazing Mode Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const stargazingBtn = document.getElementById('stargazing-btn');
  const exitBtn = document.getElementById('exit-stargazing-btn');
  const contentSections = document.querySelectorAll('.content-visible');
  const body = document.body;
  
  function enterStargazingMode() {
    // Add stargazing mode class to body for background transition
    body.classList.add('stargazing-mode');
    
    // Hide all content sections with transition
    contentSections.forEach(section => {
      section.classList.remove('content-visible');
      section.classList.add('content-hidden');
    });
    
    // Hide main stargazing button and show exit button
    stargazingBtn.classList.remove('content-visible');
    stargazingBtn.classList.add('content-hidden');
    
    setTimeout(() => {
      stargazingBtn.style.display = 'none';
      exitBtn.classList.remove('opacity-0', 'pointer-events-none');
      exitBtn.classList.add('opacity-100');
    }, 800);
  }
  
  function exitStargazingMode() {
    // Remove stargazing mode class from body
    body.classList.remove('stargazing-mode');
    
    // Show all content sections with transition
    contentSections.forEach(section => {
      section.classList.remove('content-hidden');
      section.classList.add('content-visible');
    });
    
    // Hide exit button and show main stargazing button
    exitBtn.classList.remove('opacity-100');
    exitBtn.classList.add('opacity-0', 'pointer-events-none');
    
    setTimeout(() => {
      stargazingBtn.style.display = 'flex';
      stargazingBtn.classList.remove('content-hidden');
      stargazingBtn.classList.add('content-visible');
    }, 200);
  }
  
  // Event listeners
  stargazingBtn.addEventListener('click', enterStargazingMode);
  exitBtn.addEventListener('click', exitStargazingMode);
  
  // Optional: Exit stargazing mode with Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && body.classList.contains('stargazing-mode')) {
      exitStargazingMode();
    }
  });
});
</script>
{% endblock %}
