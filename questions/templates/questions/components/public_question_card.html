{% load ui_extras %}
{# Public Question Card Component #}
<div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300 h-full">
  <div class="card-body flex flex-col h-full">
    <!-- Question Header -->
    <div class="flex items-start justify-between mb-3">
      <div class="flex items-center gap-2">
        <div class="badge badge-secondary">
            <i class="fas fa-globe"></i>
        </div>
      </div>
      <div class="flex items-center gap-2">
        {% include 'components/tag_list.html' with tags=question.tags.all max_visible=2 component_id=question.pk|prefixed_id:'public_question' %}
        {% include 'questions/components/question_actions_menu.html' %}
      </div>
    </div>

    <!-- Question Title -->
    <h3 class="card-title text-base mb-2 line-clamp-2">
      {{ question.title }}
    </h3>

    <!-- Question Body Preview -->
    {% if question.body %}
      <p class="text-sm text-base-content/70 mb-4 line-clamp-3">
        {{ question.body|truncatewords:20 }}
      </p>
    {% endif %}

    <!-- Question Meta -->
    <div class="flex items-center justify-between text-xs text-base-content/60 mb-4">
      <span>
        <i class="fas fa-user mr-1"></i>
        {{ question.owner.username }}
      </span>
      <span>
        <i class="fas fa-calendar mr-1"></i>
        {{ question.created_at|date:"M d, Y" }}
      </span>
    </div>

    <!-- Community Stats -->
    <div class="flex items-center justify-between text-xs text-base-content/60 mb-4">
      <span>
        <i class="fas fa-eye mr-1"></i>
        Example question
      </span>
    </div>

    <!-- Actions -->
    <div class="card-actions justify-end mt-auto">
      <a href="{% url 'questions:detail' pk=question.pk %}" class="btn btn-outline btn-sm">
        <i class="fas fa-eye mr-1"></i>
        View
      </a>
      {% if user.is_authenticated %}
        {% if question.title in saved_question_titles %}
          <button class="btn btn-success btn-sm" disabled>
            <i class="fas fa-check mr-1"></i>
            Saved
          </button>
        {% else %}
          <button 
            class="btn btn-primary btn-sm save-question-btn" 
            data-question-id="{{ question.id }}"
            data-question-title="{{ question.title }}"
          >
            <i class="fas fa-bookmark mr-1"></i>
            Save
          </button>
        {% endif %}
      {% else %}
        <div class="tooltip" data-tip="Sign in to save questions">
          <button class="btn btn-primary btn-sm btn-disabled">
            <i class="fas fa-bookmark mr-1"></i>
            Save
          </button>
        </div>
      {% endif %}
    </div>
  </div>
</div>
